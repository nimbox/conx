# conx

A command line utility to develop and test nimbox connectors.

## Getting Started

1. Install the `conx` utility program:

    ```bash
    brew install nimbox/public/conx
    ```

2. Create a working directory and move to it.

3. Create a minimal `configuration.json` with the following structure.
   The `configuration` part of the file corresponds to the same
   configuration used in the application. Bare in mind that the
   `host.docker.internal` needs to be used in case there is a tunnel from the 
   server running docker to the server hosting the remote database.

    ```json
    {
      "business": {
        "country": "DO",
        "currency": "DOP",
        "currencies": [ "USD", "EUR" ],
        "locale": "es"
      },
      "connector": {
        "streamer": {
          "contacts": {
            "representative": { "phones": 3, "emails": 1, "addresses": 0 },
            "customer": { "phones": 3, "emails": 1, "addresses": 1 },
            "customerContact": { "phones": 3, "emails": 3, "addresses": 1 }
          }
        }
      },
      "configuration": {
        "version": 1,
        "url": "jdbc:sqlserver://host.docker.internal;databaseName=CONNECTOR",
        "reader": {
          "username": "sa",
          "password": "Password1!"
        },
        "renderer": "FREEMARKER"
      }
    }
    ```

4. Start the connector server with the following command:

    ```bash
    conx start configuration.json .
    ```

5. If you have all the queries available in your working directory then launch a
   sync command and wait for the completion:
     
    ```bash
    conx sync --wait
    ```
6. To check the logs being generated by the connector, use the following command:

    ```bash
    docker logs -f connector-serve
    ```

6. To terminate or restart the whole process, use the following commands:

    ```bash
    conx stop
    conx start configuration.json .
    ```


